import{j as I,a as Qe,F as et}from"./emotion-react-jsx-runtime.browser.esm-B6nDGTOp.js";import{d as Be}from"./index-gEP6Tn1u.js";import{r as n}from"./index-qCb0-TeD.js";import{M as tt}from"./index-_xFncG76.js";import{i as ot}from"./isNil-CHIgUVhi.js";import{c as Y}from"./index-DbGQkxQ5.js";import{R as rt}from"./index-NCLGaooH.js";import{g as nt,m as st,r as at,a as ct,p as it,b as Ie}from"./omit-LJmhX_jk.js";import{u as lt,r as ut}from"./useBreakpoint-CVOk84jo.js";import{u as Me}from"./useCSSVarCls-DCHdCyfl.js";import{u as mt,t as dt}from"./useSize-XLj32eBt.js";import"./presets-fZzeZ6Sn.js";import{c as pt}from"./reactNode-CVIZC-dj.js";import{P as gt}from"./index-CAksj7fM.js";import"./jsx-runtime-DzlC0hKS.js";import"./define-D3i8B5cg.js";import"./emotion-react.browser.esm-DKbCFQzN.js";import"./Portal-qV56MC8h.js";import"./index-fivQpuRm.js";import"./index-CmoHrzZA.js";import"./toConsumableArray-BjwuTSou.js";import"./shadow-smhd3i8u.js";import"./useId-CkKFPa5_.js";import"./isVisible-DhUEo0yb.js";import"./DisabledContext-NEMnJEZA.js";import"./KeyCode-lh1qUinJ.js";import"./motion-DdkSFxyu.js";import"./index-CiDJ99qe.js";import"./ContextIsolator-CdD3uTNK.js";import"./context-bgT8s9yI.js";import"./asyncToGenerator-CUe5B5qN.js";import"./Compact-VphdgA5n.js";import"./useZIndex-BbbELKB6.js";import"./colors-wf8q_7Rm.js";import"./presetColors-DLnX3ho6.js";const ee=n.createContext({}),ft=e=>{const{antCls:o,componentCls:r,iconCls:t,avatarBg:s,avatarColor:i,containerSize:l,containerSizeLG:a,containerSizeSM:m,textFontSize:f,textFontSizeLG:d,textFontSizeSM:$,borderRadius:W,borderRadiusLG:E,borderRadiusSM:w,lineWidth:x,lineType:z}=e,j=(c,h,b)=>({width:c,height:c,borderRadius:"50%",[`&${r}-square`]:{borderRadius:b},[`&${r}-icon`]:{fontSize:h,[`> ${t}`]:{margin:0}}});return{[r]:Object.assign(Object.assign(Object.assign(Object.assign({},at(e)),{position:"relative",display:"inline-flex",justifyContent:"center",alignItems:"center",overflow:"hidden",color:i,whiteSpace:"nowrap",textAlign:"center",verticalAlign:"middle",background:s,border:`${ct(x)} ${z} transparent`,"&-image":{background:"transparent"},[`${o}-image-img`]:{display:"block"}}),j(l,f,W)),{"&-lg":Object.assign({},j(a,d,E)),"&-sm":Object.assign({},j(m,$,w)),"> img":{display:"block",width:"100%",height:"100%",objectFit:"cover"}})}},vt=e=>{const{componentCls:o,groupBorderColor:r,groupOverlapping:t,groupSpace:s}=e;return{[`${o}-group`]:{display:"inline-flex",[o]:{borderColor:r},"> *:not(:first-child)":{marginInlineStart:t}},[`${o}-group-popover`]:{[`${o} + ${o}`]:{marginInlineStart:s}}}},St=e=>{const{controlHeight:o,controlHeightLG:r,controlHeightSM:t,fontSize:s,fontSizeLG:i,fontSizeXL:l,fontSizeHeading3:a,marginXS:m,marginXXS:f,colorBorderBg:d}=e;return{containerSize:o,containerSizeLG:r,containerSizeSM:t,textFontSize:Math.round((i+l)/2),textFontSizeLG:a,textFontSizeSM:s,groupSpace:f,groupOverlapping:-m,groupBorderColor:d}},Pe=nt("Avatar",e=>{const{colorTextLightSolid:o,colorTextPlaceholder:r}=e,t=st(e,{avatarBg:r,avatarColor:o});return[ft(t),vt(t)]},St);var ht=function(e,o){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&o.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,t=Object.getOwnPropertySymbols(e);s<t.length;s++)o.indexOf(t[s])<0&&Object.prototype.propertyIsEnumerable.call(e,t[s])&&(r[t[s]]=e[t[s]]);return r};const Fe=n.forwardRef((e,o)=>{const{prefixCls:r,shape:t,size:s,src:i,srcSet:l,icon:a,className:m,rootClassName:f,style:d,alt:$,draggable:W,children:E,crossOrigin:w,gap:x=4,onError:z}=e,j=ht(e,["prefixCls","shape","size","src","srcSet","icon","className","rootClassName","style","alt","draggable","children","crossOrigin","gap","onError"]),[c,h]=n.useState(1),[b,M]=n.useState(!1),[k,B]=n.useState(!0),O=n.useRef(null),R=n.useRef(null),N=it(o,O),{getPrefixCls:y,avatar:v}=n.useContext(Ie),S=n.useContext(ee),A=()=>{if(!R.current||!O.current)return;const g=R.current.offsetWidth,u=O.current.offsetWidth;g!==0&&u!==0&&x*2<u&&h(u-x*2<g?(u-x*2)/g:1)};n.useEffect(()=>{M(!0)},[]),n.useEffect(()=>{B(!0),h(1)},[i]),n.useEffect(A,[x]);const L=()=>{(z==null?void 0:z())!==!1&&B(!1)},p=mt(g=>{var u,T;return(T=(u=s??(S==null?void 0:S.size))!==null&&u!==void 0?u:g)!==null&&T!==void 0?T:"default"}),Q=Object.keys(typeof p=="object"?p||{}:{}).some(g=>["xs","sm","md","lg","xl","xxl"].includes(g)),V=lt(Q),He=n.useMemo(()=>{if(typeof p!="object")return{};const g=ut.find(T=>V[T]),u=p[g];return u?{width:u,height:u,fontSize:u&&(a||E)?u/2:18}:{}},[V,p]),C=y("avatar",r),se=Me(C),[Je,Ze,De]=Pe(C,se),Xe=Y({[`${C}-lg`]:p==="large",[`${C}-sm`]:p==="small"}),ae=n.isValidElement(i),Ye=t||(S==null?void 0:S.shape)||"circle",Ke=Y(C,Xe,v==null?void 0:v.className,`${C}-${Ye}`,{[`${C}-image`]:ae||i&&k,[`${C}-icon`]:!!a},De,se,m,f,Ze),Ue=typeof p=="number"?{width:p,height:p,fontSize:a?p/2:18}:{};let P;if(typeof i=="string"&&k)P=n.createElement("img",{src:i,draggable:W,srcSet:l,onError:L,alt:$,crossOrigin:w});else if(ae)P=i;else if(a)P=a;else if(b||c!==1){const g=`scale(${c})`,u={msTransform:g,WebkitTransform:g,transform:g};P=n.createElement(rt,{onResize:A},n.createElement("span",{className:`${C}-string`,ref:R,style:Object.assign({},u)},E))}else P=n.createElement("span",{className:`${C}-string`,style:{opacity:0},ref:R},E);return Je(n.createElement("span",Object.assign({},j,{style:Object.assign(Object.assign(Object.assign(Object.assign({},Ue),He),v==null?void 0:v.style),d),className:Ke,ref:N}),P))}),ce=e=>{const{size:o,shape:r}=n.useContext(ee),t=n.useMemo(()=>({size:e.size||o,shape:e.shape||r}),[e.size,e.shape,o,r]);return n.createElement(ee.Provider,{value:t},e.children)},bt=e=>{var o,r,t,s;const{getPrefixCls:i,direction:l}=n.useContext(Ie),{prefixCls:a,className:m,rootClassName:f,style:d,maxCount:$,maxStyle:W,size:E,shape:w,maxPopoverPlacement:x,maxPopoverTrigger:z,children:j,max:c}=e,h=i("avatar",a),b=`${h}-group`,M=Me(h),[k,B,O]=Pe(h,M),R=Y(b,{[`${b}-rtl`]:l==="rtl"},O,M,m,f,B),N=dt(j).map((S,A)=>pt(S,{key:`avatar-key-${A}`})),y=(c==null?void 0:c.count)||$,v=N.length;if(y&&y<v){const S=N.slice(0,y),A=N.slice(y,v),L=(c==null?void 0:c.style)||W,p=((o=c==null?void 0:c.popover)===null||o===void 0?void 0:o.trigger)||z||"hover",Q=((r=c==null?void 0:c.popover)===null||r===void 0?void 0:r.placement)||x||"top",V=Object.assign(Object.assign({content:A},c==null?void 0:c.popover),{classNames:{root:Y(`${b}-popover`,(s=(t=c==null?void 0:c.popover)===null||t===void 0?void 0:t.classNames)===null||s===void 0?void 0:s.root)},placement:Q,trigger:p});return S.push(n.createElement(gt,Object.assign({key:"avatar-popover-key",destroyTooltipOnHide:!0},V),n.createElement(Fe,{style:L},`+${v-y}`))),k(n.createElement(ce,{shape:w,size:E},n.createElement("div",{className:R,style:d},S)))}return k(n.createElement(ce,{shape:w,size:E},n.createElement("div",{className:R,style:d},N)))},Le=Fe;Le.Group=bt;function xt(){const e="\\ud800-\\udfff",l="\\u0300-\\u036f"+"\\ufe20-\\ufe2f"+"\\u20d0-\\u20ff"+"\\u1ab0-\\u1aff"+"\\u1dc0-\\u1dff",a="\\ufe0e\\ufe0f",m="\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c14\\u0c60-\\u0c61",f="\\u0c3e-\\u0c44\\u0c46-\\u0c48\\u0c4a-\\u0c4c\\u0c62-\\u0c63",d="\\u0c15-\\u0c28\\u0c2a-\\u0c39",$="\\u0c58-\\u0c5a",W="\\u0c01-\\u0c03\\u0c4d\\u0c55\\u0c56",w=`[${m}\\u0c66-\\u0c6f\\u0c78-\\u0c7e${$}]|[${d}](?!\\u0c4d)`,x=`[${d}${$}][${f}]|[${d}${$}][${W}]`,j=`(?:${`[${d}]\\u0c4d[${d}]`}|${x}|${w})`,c=`[${e}]`,h=`[${l}]`,b="\\ud83c[\\udffb-\\udfff]",M=`(?:${h}|${b})`,k=`[^${e}]`,B="(?:\\ud83c[\\udde6-\\uddff]){2}",O="[\\ud800-\\udbff][\\udc00-\\udfff]",R="\\u200d",N="(?:\\ud83c\\udff4\\udb40\\udc67\\udb40\\udc62\\udb40(?:\\udc65|\\udc73|\\udc77)\\udb40(?:\\udc6e|\\udc63|\\udc6c)\\udb40(?:\\udc67|\\udc74|\\udc73)\\udb40\\udc7f)",y=`${M}?`,v=`[${a}]?`,S=`(?:${R}(?:${[k,B,O].join("|")})${v+y})*`,A=v+y+S,L=`${k}${h}?`,p=`(?:${[N,L,h,B,O,c].join("|")})`;return new RegExp(`${b}(?=${b})|${j}|${p+A}`,"g")}const F="‍",Te=(()=>{try{return new RegExp("\\p{L}","u"),!0}catch{return!1}})(),Ve=e=>e.match(new RegExp(`^(\\p{Emoji})(${F}.)*$`,"u")),ne=[xt(),new RegExp("[\\S]")],_e=[new RegExp("\\p{Lu}|\\p{Ll}|\\p{Lt}|\\p{Lo}","u"),new RegExp("\\p{Lu}|\\p{Ll}|\\p{Lt}|\\p{Lo}|\\p{N}","u"),new RegExp(`(?:(\\p{Emoji})(?:${F}.)*)|\\p{L}|\\p{N}|\\p{S}`,"u"),new RegExp(`(?:(\\p{Emoji})(?:${F}.)*)|\\p{L}|\\p{N}|\\p{S}|\\p{P}`,"u"),new RegExp("[^\\p{Z}|\\p{C}]","u"),...ne],te=e=>{const r=document.createElement("canvas").getContext("2d");if(!r)throw new Error("Failed to get canvas context");const t=16;return r.font=`${t}px sans`,r.measureText(e).width},oe=e=>{const o=e.split(F);if(o.length<2)return e;let r=o[0];if(r===void 0)return e;let t=r,s=te(r);for(let i=1;i<o.length;i++){const l=o.slice(0,i+1).join(F),a=te(l);a<=s&&(t=l),r=l,s=a}return t};function yt(e,o){const r=(o==null?void 0:o.unicode)??Te,t=r?_e:ne;for(const s of t){const i=e.match(s);if(i){const l=i[0];if(r&&Ve(i[0]))return oe(l);if(!r){const a=i.filter(f=>!f.match(/^\s$/)),m=a==null?void 0:a[0];return m?oe(m):l}return l}}return e[0]??""}const K=Object.assign(yt,{isRegexUnicodeSupported:Te,isEmoji:Ve,getFirstVisualEmojiZwjSequence:oe,ZWJ:F,legacyRules:ne,unicodeRules:_e,measureTextWidth:te}),ie=Be({root:{name:"1kbwskh-emotion-root",styles:"@layer emotion-component{&{flex-shrink:0;border:none;}& > img{object-fit:cover;}};label:emotion-root;"},withSequenceBackgroundColor:{name:"xcg7xc-emotion-withSequenceBackgroundColor",styles:"color:#2C3848;label:emotion-withSequenceBackgroundColor;"}}),le=["#FFBAAB","#FFE976","#99ED9E","#B5D7FF","#D4B9F9"],Ct=n.forwardRef(function({getFirstCharacterAsAvatarOptions:o,icon:r,backgroundColorIndex:t,...s},i){const l=n.useMemo(()=>typeof r!="string"?r:K(r,o),[o,r]),a=n.useMemo(()=>typeof t=="number"&&t>=0,[t]),m=n.useMemo(()=>!a||typeof t!="number"?0:t%le.length,[t,a]),f=n.useMemo(()=>[ie.root,a&&ie.withSequenceBackgroundColor,a&&{backgroundColor:le[m]}],[m,a]);return I(Le,{css:f,...s,icon:ot(l)||l===""?I(tt,{"un-i-motif":"user"}):l,ref:i})}),re=Object.assign(Ct,{}),qe=Be({demo:{name:"16e4aov-emotion-demo",styles:"display:flex;flex-direction:row;gap:8px;align-items:center;label:emotion-demo;"}}),ao={component:re,render:e=>Qe("div",{css:qe.demo,children:[I(re,{...e}),I("span",{children:e.icon})]})},$t="https://github.com/vdustr.png",Ge="",U="https://localhost:1/invalid.png",_={args:{src:$t}},q={args:{src:Ge,icon:"fallback"}},G={args:{src:U,icon:"😼VP👻🔹安藤海斗AndoKaito🐙🍜"}},H={args:{src:U,icon:["🐈","🟨"].join(K.ZWJ)}},J={args:{src:U,icon:["🐈","⬛"].join(K.ZWJ)}},Z={args:{src:U,icon:["🐈","⬛","🟨"].join(K.ZWJ)}},D={args:{src:Ge,icon:""}},Et=Array.from({length:30}).map((e,o)=>I(re,{icon:I(et,{children:o+1}),backgroundColorIndex:o},o)),X={render:e=>I("div",{css:qe.demo,children:Et})};var ue,me,de;_.parameters={..._.parameters,docs:{...(ue=_.parameters)==null?void 0:ue.docs,source:{originalSource:`{
  args: {
    src: validImgSrc
  }
}`,...(de=(me=_.parameters)==null?void 0:me.docs)==null?void 0:de.source}}};var pe,ge,fe;q.parameters={...q.parameters,docs:{...(pe=q.parameters)==null?void 0:pe.docs,source:{originalSource:`{
  args: {
    src: emptyImgSrc,
    icon: "fallback"
  }
}`,...(fe=(ge=q.parameters)==null?void 0:ge.docs)==null?void 0:fe.source}}};var ve,Se,he;G.parameters={...G.parameters,docs:{...(ve=G.parameters)==null?void 0:ve.docs,source:{originalSource:`{
  args: {
    src: invalidImgSrc,
    icon: "😼VP👻🔹安藤海斗AndoKaito🐙🍜"
  }
}`,...(he=(Se=G.parameters)==null?void 0:Se.docs)==null?void 0:he.source}}};var be,xe,ye;H.parameters={...H.parameters,docs:{...(be=H.parameters)==null?void 0:be.docs,source:{originalSource:`{
  args: {
    src: invalidImgSrc,
    icon: ["🐈", "🟨"].join(getFirstCharacterAsAvatar.ZWJ)
  }
}`,...(ye=(xe=H.parameters)==null?void 0:xe.docs)==null?void 0:ye.source}}};var Ce,$e,Ee;J.parameters={...J.parameters,docs:{...(Ce=J.parameters)==null?void 0:Ce.docs,source:{originalSource:`{
  args: {
    src: invalidImgSrc,
    icon: ["🐈", "⬛"].join(getFirstCharacterAsAvatar.ZWJ)
  }
}`,...(Ee=($e=J.parameters)==null?void 0:$e.docs)==null?void 0:Ee.source}}};var je,Re,we;Z.parameters={...Z.parameters,docs:{...(je=Z.parameters)==null?void 0:je.docs,source:{originalSource:`{
  args: {
    src: invalidImgSrc,
    icon: ["🐈", "⬛", "🟨"].join(getFirstCharacterAsAvatar.ZWJ)
  }
}`,...(we=(Re=Z.parameters)==null?void 0:Re.docs)==null?void 0:we.source}}};var ze,ke,Oe;D.parameters={...D.parameters,docs:{...(ze=D.parameters)==null?void 0:ze.docs,source:{originalSource:`{
  args: {
    src: emptyImgSrc,
    icon: ""
  }
}`,...(Oe=(ke=D.parameters)==null?void 0:ke.docs)==null?void 0:Oe.source}}};var Ne,Ae,We;X.parameters={...X.parameters,docs:{...(Ne=X.parameters)==null?void 0:Ne.docs,source:{originalSource:`{
  render: _args => <div css={styles.demo}>{avatarsWithBackgroundColorIndex}</div>
}`,...(We=(Ae=X.parameters)==null?void 0:Ae.docs)==null?void 0:We.source}}};const co=["DefaultStory","EmptyImgSrcStory","NameWithEmojiAndTextStory","NameWithCatYellowEmoji","NameWithBlackCatEmoji","NameWithBlackCatYellowEmoji","BothEmpty","WithBackgroundColorIndex"];export{D as BothEmpty,_ as DefaultStory,q as EmptyImgSrcStory,J as NameWithBlackCatEmoji,Z as NameWithBlackCatYellowEmoji,H as NameWithCatYellowEmoji,G as NameWithEmojiAndTextStory,X as WithBackgroundColorIndex,co as __namedExportsOrder,ao as default};
